# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type PaginationOutputDto {
  totalItems: Int!
  currentPage: Int!
  totalPages: Int!
  itemsPerPage: Int!
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
}

type SpaceCount {
  essays: Int!
  quizzes: Int!
  vocabularies: Int!
}

type Space {
  id: ID!
  name: String!
  description: String
  created_by: User!
  created_at: DateTime!
  updated_at: DateTime!
  _count: SpaceCount
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type UserLanguage {
  id: ID!
  user_id: String!
  language: String!
  proficiency_level: String!
  is_native: Boolean!
  created_at: DateTime!
  updated_at: DateTime!
}

type CorrectionReply {
  id: ID!
  correction_id: String!
  comment: String!
  created_by: String!
  created_at: DateTime!
  updated_at: DateTime!
  creator: User
}

type CorrectionSentence {
  id: ID!
  id_correction: String!
  index: Float!
  original_text: String!
  corrected_text: String!
  explanation: String!
  is_correct: Boolean!
  rating: Float!
  created_at: DateTime!
  updated_at: DateTime!
  correction: Correction
}

type Correction {
  id: ID!
  essay_id: String!
  overall_comment: String
  rating: Int
  created_by: String!
  created_at: DateTime!
  updated_at: DateTime!
  essay: Essay
  creator: User
  sentences: [CorrectionSentence!]
  replies: [CorrectionReply!]
}

type HashtagCount {
  essays: Float!
}

type Hashtag {
  id: ID!
  name: String!
  created_at: DateTime!
  updated_at: DateTime!
  essays: [EssayHashtag!]
  _count: HashtagCount
}

type EssayHashtag {
  id: ID!
  essay_id: ID!
  hashtag_id: ID!
  created_at: DateTime!
  essay: Essay
  hashtag: Hashtag
}

type Essay {
  id: ID!
  id_space: String!
  title: String!
  summary: String
  content: String!
  upvote_count: Float!
  cover_url: String
  status: EssayStatus!
  language: String!
  created_by: String!
  created_at: DateTime!
  updated_at: DateTime!
  space: Space
  author: User
  corrections: [Correction!]
  hashtags: [EssayHashtag!]
}

"""The status of an essay"""
enum EssayStatus {
  draft
  public
  private
  deleted
}

type Follower {
  id: ID!
  id_follower: String!
  id_following: String!
  followed_at: DateTime!
  follower: User
  following: User
}

type User {
  id: ID!
  username: String
  email: String!
  password_hash: String
  role: UserRole!
  auth_provider: AuthProvider!
  auth_provider_id: String
  first_name: String
  last_name: String
  profile_picture: String
  is_email_verified: Boolean!
  last_login: DateTime
  created_at: DateTime!
  updated_at: DateTime!
  languages: [UserLanguage!]
  followedBy: [Follower!]
  following: [Follower!]
  spaces: [Space!]
  essays: [Essay!]
}

"""User roles in the system"""
enum UserRole {
  user
  admin
}

"""Authentication providers"""
enum AuthProvider {
  local
  google
  facebook
}

type CorrectionResponseOneDto {
  id: ID!
  essay_id: String!
  created_by: String!
  overall_comment: String
  rating: Float
  created_at: DateTime!
  updated_at: DateTime!
  creator: User
  sentences: [CorrectionSentence!]
}

type CorrectionResponseAllDto {
  data: [CorrectionResponseOneDto!]!
  pagination: PaginationOutputDto!
}

type SpacesResponse {
  data: [Space!]!
  pagination: PaginationOutputDto!
}

type UsersResponse {
  data: [User!]!
  pagination: PaginationOutputDto!
}

type Query {
  users(findAllUsersDto: FindAllUsersDto!): UsersResponse!
  user(id: String!): User!
  getUserSpaces(input: GetUserSpacesDto!): SpacesResponse!
  getCorrectionsByEssay(input: GetCorrectionsByEssayDto!): CorrectionResponseAllDto!
  getCorrectionIfExist(essayId: String!): CorrectionResponseOneDto
}

input FindAllUsersDto {
  page: Int! = 1
  perPage: Int! = 10
  search: String
}

input GetUserSpacesDto {
  userId: String!
  page: Float
  perPage: Float
  search: String
}

input GetCorrectionsByEssayDto {
  page: Int! = 1
  perPage: Int! = 10
  essayId: String!
  search: String
}

type Mutation {
  createUser(createUserInput: CreateUserDto!): User!
  updateUser(id: String!, updateUserInput: UpdateUserDto!): User!
  removeUser(id: String!): User!
  createCorrectionEssay(input: CreateCorrectionDto!): CorrectionResponseOneDto!
  updateCorrectionEssay(input: UpdateCorrectionDto!): CorrectionResponseOneDto!
}

input CreateUserDto {
  last_name: String
  first_name: String
  username: String!
  email: String!
  password: String!
  profile_picture: String
  role: UserRole
  auth_provider: AuthProvider
}

input UpdateUserDto {
  id: UserRole
}

input CreateCorrectionDto {
  essay_id: String!
  overall_comment: String
  rating: Float
  sentences: [CreateCorrectionSentenceDto!]!
}

input CreateCorrectionSentenceDto {
  original_text: String!
  index: Float!
  corrected_text: String!
  explanation: String!
  is_correct: Boolean!
  rating: Float!
}

input UpdateCorrectionDto {
  id: String!
  overall_comment: String
  rating: Float
  sentences: [UpdateCorrectionSentenceDto!]!
}

input UpdateCorrectionSentenceDto {
  index: Float!
  original_text: String!
  corrected_text: String!
  explanation: String!
  is_correct: Boolean!
  rating: Float!
}